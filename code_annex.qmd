---
title: "R Code Annex"
subtitle: "Quick Reference for MA206X"
---

## Essential R Functions for Statistics

This page provides a quick reference for the most commonly used R functions in MA206X.

### Loading Packages

```r
library(tidyverse)   # Data manipulation and visualization
library(kableExtra)  # Enhanced tables
library(patchwork)   # Combining plots
```

## Data Manipulation (dplyr)

| Function | Purpose | Example |
|----------|---------|---------|
| `select()` | Choose columns | `df %>% select(name, age)` |
| `filter()` | Choose rows | `df %>% filter(age > 21)` |
| `mutate()` | Create/modify columns | `df %>% mutate(age_squared = age^2)` |
| `arrange()` | Sort rows | `df %>% arrange(desc(score))` |
| `group_by()` | Group for summaries | `df %>% group_by(company)` |
| `summarize()` | Create summaries | `df %>% summarize(mean_age = mean(age))` |

## Descriptive Statistics

### Measures of Location

```r
mean(x)              # Arithmetic mean
median(x)            # Median
quantile(x, 0.25)    # 25th percentile (Q1)
quantile(x, 0.75)    # 75th percentile (Q3)
```

### Measures of Spread

```r
var(x)               # Variance
sd(x)                # Standard deviation
IQR(x)               # Interquartile range
range(x)             # Min and max
max(x) - min(x)      # Range value
```

### Comprehensive Summary

```r
summary(x)           # Five-number summary + mean
```

## Data Visualization (ggplot2)

### Basic Template

```r
ggplot(data = df, aes(x = variable)) +
  geom_[type]() +
  labs(title = "Title", x = "X-axis", y = "Y-axis") +
  theme_minimal()
```

### Common Plot Types

**Histogram** (one quantitative variable):
```r
ggplot(df, aes(x = score)) +
  geom_histogram(bins = 20, fill = "steelblue", color = "white")
```

**Boxplot** (one quantitative variable):
```r
ggplot(df, aes(y = score)) +
  geom_boxplot(fill = "steelblue")
```

**Bar Chart** (one categorical variable):
```r
ggplot(df, aes(x = category)) +
  geom_bar(fill = "steelblue")
```

**Scatterplot** (two quantitative variables):
```r
ggplot(df, aes(x = var1, y = var2)) +
  geom_point()
```

**Side-by-side boxplots** (categorical + quantitative):
```r
ggplot(df, aes(x = group, y = score, fill = group)) +
  geom_boxplot()
```

**Faceted plots** (multiple subplots):
```r
ggplot(df, aes(x = var)) +
  geom_histogram() +
  facet_wrap(~category)
```

## Probability Distributions

### Normal Distribution

```r
dnorm(x, mean, sd)    # Probability density at x
pnorm(q, mean, sd)    # P(X ≤ q)
qnorm(p, mean, sd)    # Find quantile for probability p
rnorm(n, mean, sd)    # Generate n random values
```

### Binomial Distribution

```r
dbinom(x, size, prob)  # P(X = x)
pbinom(q, size, prob)  # P(X ≤ q)
qbinom(p, size, prob)  # Find quantile
rbinom(n, size, prob)  # Generate random values
```

### Other Distributions

Replace `norm` or `binom` with:

- `t` for t-distribution
- `exp` for exponential
- `pois` for Poisson
- `chisq` for chi-square
- `f` for F-distribution

## Hypothesis Testing

### One-sample t-test

```r
t.test(x, mu = 0, alternative = "two.sided")
# alternative: "two.sided", "less", or "greater"
```

### Two-sample t-test

```r
t.test(x, y, var.equal = FALSE)  # Welch's t-test
t.test(x, y, var.equal = TRUE)   # Pooled t-test
```

### Paired t-test

```r
t.test(x, y, paired = TRUE)
```

### Proportion test

```r
prop.test(x = successes, n = trials, p = 0.5)
```

## Confidence Intervals

### For means

```r
t.test(x, conf.level = 0.95)$conf.int
```

### For proportions

```r
prop.test(x = successes, n = trials)$conf.int
```

## Correlation and Regression

### Correlation

```r
cor(x, y)                    # Correlation coefficient
cor.test(x, y)               # Test significance
```

### Linear Regression

```r
model <- lm(y ~ x, data = df)
summary(model)               # Model summary
predict(model, newdata)      # Predictions
```

### Multiple regression

```r
model <- lm(y ~ x1 + x2 + x3, data = df)
```

## ANOVA

```r
model <- aov(response ~ group, data = df)
summary(model)
TukeyHSD(model)              # Post-hoc pairwise comparisons
```

## Useful Utilities

### Data Creation

```r
c(1, 2, 3, 4, 5)             # Combine values into vector
seq(1, 10, by = 2)           # Sequence: 1, 3, 5, 7, 9
rep(5, times = 3)            # Repeat: 5, 5, 5
1:10                         # Sequence: 1, 2, ..., 10
```

### Sampling

```r
sample(x, size = 10, replace = FALSE)  # Random sample
set.seed(123)                           # Set random seed for reproducibility
```

### Logical Operators

```r
==    # Equal to
!=    # Not equal to
>     # Greater than
<     # Less than
>=    # Greater than or equal
<=    # Less than or equal
&     # AND
|     # OR
!     # NOT
```

### Missing Values

```r
is.na(x)                     # Check for NA
na.omit(df)                  # Remove rows with NA
mean(x, na.rm = TRUE)        # Calculate mean, ignoring NA
```

## Tidyverse Workflow Example

```r
# Complete analysis pipeline
results <- df %>%
  filter(age >= 18) %>%           # Keep adults only
  mutate(bmi = weight/height^2) %>%  # Calculate BMI
  group_by(gender) %>%             # Group by gender
  summarize(                       # Calculate summaries
    n = n(),
    mean_bmi = mean(bmi),
    sd_bmi = sd(bmi)
  ) %>%
  arrange(desc(mean_bmi))          # Sort by BMI

# View results
results
```

## Getting Help

```r
?function_name       # Help for specific function
??search_term        # Search help files
help.start()         # HTML help interface
example(mean)        # Run examples for function
```

## Keyboard Shortcuts (RStudio)

| Action | Windows/Linux | Mac |
|--------|---------------|-----|
| Run current line | Ctrl + Enter | Cmd + Enter |
| Assignment operator `<-` | Alt + - | Option + - |
| Pipe operator `%>%` | Ctrl + Shift + M | Cmd + Shift + M |
| Comment/uncomment | Ctrl + Shift + C | Cmd + Shift + C |
| Insert code chunk | Ctrl + Alt + I | Cmd + Option + I |

## Common Error Messages

**Error in...: object 'x' not found**
- Object doesn't exist; check spelling or create it first

**Error: could not find function...**
- Function not loaded; load required package with `library()`

**Warning: NAs introduced by coercion**
- R couldn't convert values; check data types

**Error in if...: missing value where TRUE/FALSE needed**
- NA values in logical condition; use `na.rm = TRUE` or filter NAs first

---

*This reference sheet covers the most common R operations for MA206X. For more details, see the official [R documentation](https://www.r-project.org/) or [Tidyverse documentation](https://www.tidyverse.org/).*
